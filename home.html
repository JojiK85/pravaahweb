<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PRAVAAH ‚Äî Chronicles of Time</title>

  <!-- Fonts & icons -->
  <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />

  <!-- your main stylesheet -->
  <link rel="stylesheet" href="style.css" />

  <!-- Minimal override CSS for the carousel fix -->
  <style>
    /* --- carousel fix overrides --- */
    .highlights-carousel { overflow: hidden; }
    .slider-track {
      display: flex;
      width: max-content;
      gap: 30px;
      /* NO animation here ‚Äî JS will add .started */
    }

    /* start animation only when JS has cloned slides */
    .slider-track.started {
      animation: scrollLoop 28s linear infinite;
    }

    @keyframes scrollLoop {
      0%   { transform: translateX(0); }
      100% { transform: translateX(-50%); } /* -50% because we'll have original + cloned set */
    }

    /* pause on hover (only applies once started) */
    .highlights-carousel:hover .slider-track.started {
      animation-play-state: paused;
    }

    /* small safety: cloned slides slightly transparent so you can spot them during testing */
    .slider-track .clone { /* remove in production if you like */
      /* opacity: 1; */
    }
  </style>

  <!-- your main script (kept external) -->
  <script type="module" src="script.js" defer></script>
</head>

<body style="color:#F5F8FA; font-family:'Exo 2', sans-serif;">

  <!-- NAVBAR (unchanged) -->
  <nav> ... (keep your existing navbar content here) ... </nav>

  <!-- calendar/feed/hightlights structure (kept as you had it) -->
  <!-- üìÖ CALENDAR + FEED -->
  <h2 class="calendar-title">üìÖ PRAVAAH'26 CALENDAR</h2>

  <div class="container" id="feed">
    <div class="calendar-container">
      <div class="header">
        <button id="prevMonth">‚ùÆ</button>
        <h2 id="monthYear"></h2>
        <button id="nextMonth">‚ùØ</button>
      </div>

      <div class="days-of-week">
        <div>Sun</div><div>Mon</div><div>Tue</div>
        <div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
      </div>

      <div id="calendar" class="calendar-grid"></div>
    </div>

    <div class="feed-container">
      <h2 class="feed-title">Chronicle Feed üßæ</h2>
      <div class="feed-list" id="feedList"></div>
    </div>
  </div>

  <!-- ‚ú® HIGHLIGHTS (make sure .slide are direct children of .slider-track) -->
  <section class="highlights" id="highlights">
    <h2 class="section-title">‚ú® HIGHLIGHTS OF 2K25 ‚ú®</h2>
    <div class="highlights-carousel">
      <div class="slider-track">
        <!-- put as many slides as you want (10 is fine) -->
        <div class="slide" data-title="Opening Ceremony"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Cultural Night"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Tech Expo"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Sports Gala"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Prize Distribution"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Concert"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Workshops"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Exhibitions"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Parade"><img src="DSC09133.JPG" alt=""></div>
        <div class="slide" data-title="Closing Night"><img src="DSC09133.JPG" alt=""></div>
      </div>
    </div>
  </section>

  <!-- üé¨ AFTERMOVIE (unchanged) -->
  <section class="aftermovie-section" id="aftermovie">
    <h2 class="section-title">üé• VIDEOS ‚Äî 2K25</h2>
    <div class="video-switch">
      <button id="aftermovieBtn" class="active">Aftermovie</button>
      <button id="themeBtn">Theme Video</button>
    </div>

    <div class="aftermovie">
      <div class="video-wrapper">
        <video id="mainVideo" controls autoplay muted loop playsinline>
          <source src="aftermovie.mp4" type="video/mp4" />
          Your browser does not support the video tag.
        </video>
      </div>
    </div>
  </section>

  <!-- footer, etc. (unchanged) -->
  <footer> ... (keep your existing footer markup) ... </footer>

  <!-- ===== Carousel startup script (clones slides, waits for images, then starts) ===== -->
  <script>
    // Run after DOM loaded
    (function () {
      const track = document.querySelector(".slider-track");
      if (!track) return console.warn("No .slider-track found ‚Äî carousel not started.");

      const slides = Array.from(track.querySelectorAll(".slide"));
      if (slides.length === 0) return console.warn("No .slide children found inside .slider-track.");

      // Clone each slide once and append clones to create 2 sets (original + clones)
      slides.forEach(slide => {
        const clone = slide.cloneNode(true);
        clone.classList.add("clone");
        track.appendChild(clone);
      });

      // Wait for all images inside the track to be loaded (so widths are correct)
      const imgs = Array.from(track.querySelectorAll("img"));
      let toLoad = imgs.length;

      if (toLoad === 0) {
        // nothing to wait for ‚Äî start immediately
        track.classList.add("started");
        return;
      }

      const tryStart = () => {
        // force reflow, then add started to kick off CSS animation
        void track.offsetWidth;
        track.classList.add("started");
      };

      imgs.forEach(img => {
        if (img.complete) {
          toLoad--;
          if (toLoad === 0) tryStart();
        } else {
          img.addEventListener("load", () => {
            toLoad--;
            if (toLoad === 0) tryStart();
          }, { once: true });
          img.addEventListener("error", () => {
            // count error as loaded so we don't hang forever
            toLoad--;
            if (toLoad === 0) tryStart();
          }, { once: true });
        }
      });

      // Optional: pause animation when user hovers (extra safety)
      const carousel = document.querySelector(".highlights-carousel");
      if (carousel) {
        carousel.addEventListener("mouseenter", () => {
          track.style.animationPlayState = "paused";
        });
        carousel.addEventListener("mouseleave", () => {
          track.style.animationPlayState = "";
        });
      }
    })();
  </script>

</body>
</html>
